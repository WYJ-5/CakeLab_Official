<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <%- include('../partials/head', { title: 'å¾Œå°ç®¡ç† - è¨‚å–®' }) %>
    <style>
    /* çµ±ä¸€å…¨å¾Œå°ä½ˆå±€æ¨£å¼ - ç¢ºä¿èˆ‡ products.ejs å®Œã€‚å…¨ã€‚ä¸€è‡´ */
    :root { --sidebar-width: 250px; --primary-color: #8b5e3c; }
    body { margin: 0; background: #f8f9fa; font-family: "Microsoft JhengHei", sans-serif; }
    
    /* é—œéµï¼šé€™è£¡ä¹Ÿè¦ç¢ºä¿é¡åˆ¥åç¨±ç‚º admin-wrapper ä¸” display: flex */
    .admin-wrapper { display: flex; min-height: 100vh; }
    
    .sidebar { width: var(--sidebar-width); background: #333; color: white; padding: 30px 0; flex-shrink: 0; display: flex; flex-direction: column; }
    .sidebar-header { padding: 0 25px 20px; border-bottom: 1px solid #444; margin-bottom: 20px; text-align: center; }
    .sidebar-header h3 { margin: 0; font-size: 1.2rem; color: white; }
    
    .nav-item { display: flex; align-items: center; padding: 12px 25px; color: #bbb; text-decoration: none; transition: 0.3s; }
    .nav-item:hover { color: white; background: #444; }
    .nav-item.active { color: white; background: #444; border-left: 4px solid var(--primary-color); }
    .logout-btn { margin-top: auto; color: #ff7675; }

    /* ä»¥ä¸‹ç¶­æŒè¨‚å–®é åŸæœ¬çš„å³å´æ¨£å¼ï¼Œä¸æ›´å‹• */
    .main-content { flex: 1; padding: 40px; overflow-y: auto; }
    .card { background: white; border-radius: 12px; box-shadow: 0 4px 20px rgba(0,0,0,0.05); padding: 25px; }
    .admin-table { width: 100%; border-collapse: collapse; }
    .admin-table th { text-align: left; padding: 15px; color: #888; border-bottom: 2px solid #f4f4f4; }
    .admin-table td { padding: 15px; border-bottom: 1px solid #f4f4f4; font-size: 0.95rem; }
    .btn-edit { color: #8b5e3c; border: none; background: none; cursor: pointer; font-weight: bold; margin-right: 15px; }
    .btn-delete { color: #e74c3c; border: none; background: none; cursor: pointer; font-weight: bold; }
    .modal-overlay { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.6); z-index: 2000; align-items: center; justify-content: center; }
    .modal-content { background: white; width: 450px; padding: 30px; border-radius: 12px; box-shadow: 0 5px 30px rgba(0,0,0,0.3); }
    .modal-content label { display: block; margin-bottom: 5px; color: #666; font-size: 0.9rem; }
    .modal-content input, .modal-content textarea { width: 100%; padding: 10px; margin-bottom: 15px; border: 1px solid #ddd; border-radius: 6px; box-sizing: border-box; }
    </style>
</head>

<body>
<div class="admin-wrapper">
    <nav class="sidebar">
        <div class="sidebar-header"><h3>Cake Lab å¾Œå°</h3></div>
        <a href="/admin/products" class="nav-item">ğŸ° å•†å“ç®¡ç†</a>
        <a href="/admin/orders" class="nav-item active">ğŸ“‹ è¨‚å–®ç®¡ç†</a>
        <a href="/" class="nav-item">ğŸ  å›åˆ°é¦–é </a>
        <a href="/admin/logout" class="nav-item ">ğŸšª ç™»å‡ºç³»çµ±</a>
    </nav>

    <main class="main-content">
    <h2 style="margin-bottom: 30px;">è¨‚å–®è³‡æ–™ç¶­è­·</h2>
    
    <div class="card">
        <table class="admin-table">
            <thead>
                <tr>
                    <th width="60px">ID</th>
                    <th>è¨‚è³¼äºº</th>
                    <th>é›»è©±</th>
                    <th>å–è²¨æ—¥æœŸ</th>
                    <th>å“é …å…§å®¹</th>
                    <th>å‚™è¨»</th>
                    <th>æ“ä½œ</th>
                </tr>
            </thead>
            <tbody id="adminOrderTable"></tbody>
        </table>
    </div>

    <div id="editModal" class="modal-overlay">
        <div class="modal-content">
            <h3 style="margin-top: 0; margin-bottom: 20px;">ä¿®æ”¹è¨‚å–®è³‡æ–™</h3>
            
            <input type="hidden" id="editId">

            <label>è¨‚è³¼äººå§“å</label>
            <input type="text" id="editName">

            <label>è¯çµ¡é›»è©±</label>
            <input type="text" id="editPhone">

            <label>å–è²¨æ—¥æœŸ</label>
            <input type="date" id="editDate">

            <label>å‚™è¨»äº‹é …</label>
            <textarea id="editNotes" rows="4"></textarea>

            <div style="display: flex; gap: 10px; margin-top: 10px;">
                <button onclick="submitEdit()" style="flex: 1; padding: 12px; background: #8b5e3c; color: white; border: none; border-radius: 6px; cursor: pointer; font-weight: bold;">
                    å„²å­˜æ›´æ–°
                </button>
                <button onclick="closeModal()" style="flex: 1; padding: 12px; background: #eee; color: #666; border: none; border-radius: 6px; cursor: pointer;">
                    å–æ¶ˆ
                </button>
            </div>
        </div>
    </div>
</main>
</div>

<script src="/js/admin_orders.js"></script>
<%- include('../partials/footer') %>
</body>
</html>